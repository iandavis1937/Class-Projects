---
output:
  pdf_document: default
header-includes:
  - \usepackage{color}
---
----
 Summer 2021: Introduction to Data Science
---

```{r, echo = F, results = 'hide', message=F, warning = F}
library(knitr)  
```

# \textcolor{blue}{Lab 2: Factors and the Summary Command}
#### Author:_____Ian Davis_____

#### \textcolor{red}{Total Grade for Lab 2: /25} 
#### \textcolor{red}{Comments (optional)} 

## \textcolor{blue}{Introduction}

By now, you have finished Matrices and Factors sections of the DataCamp course, Introduction to R. This lab helps you to practice what you have learned to our Class Survey dataset. In this lab, you will gain insight into working with factors, including recognizing a factor variable, understanding the differences between a nominal and an ordinal categorical variables, factor summary, and elements selection. 

## \textcolor{blue}{Template for lab report}

\textbf{Instructions:} This is the template you will use to type up your responses to the exercises. To produce a document that you can print out and turn in just click on Knit PDF above. All you need to do to complete the lab is to type up your BRIEF answers and the R code (when necessary) in the spaces provided below.

It is strongly recommended that you knit your document regularly (minimally after answering each exercise) for two reasons. 

  1. Ensure that there are no errors in your code that would prevent the document from knitting.
  2. View the instructions and your answers in a more legible, attractive format.

## \textcolor{blue}{Here are some quick tips in case you forgot:} 

To create a new code chunk:

- Mac: Command + Option + I
- Windows: Control + Alt + I
  
```{r, echo=FALSE, out.width = '75%', fig.align= 'center'}
include_graphics(path.expand("~/share/rstudioserverNewChunck.png"))
```

In order to run a chunk of code:

- Press the small teal arrow in the top right corner of the chunk
- Press Command + Option + C
- Press Control + Alt + C

```{r, echo=FALSE,  out.width = '75%', fig.align= 'center'}
include_graphics(path.expand("~/share/rstudioserverRunChunck.png"))
```

Load the Class Survey dataset.

```{r}
ClassSurveyData <- read.csv("ClassSurvey.csv", header = TRUE)
```

## \textcolor{blue}{Working with factors: data types and levels}

Among the 21 variables in the dataset \textcolor{teal}{ClassSurveyData}, there are a good number of categorical variables. For example, the variable \textcolor{teal}{LACOLschool} is a nominal categorical variable, the variable \textcolor{teal}{ClassYear} is also a nominal categorical variable, whereas the variable \textcolor{teal}{SpringSemester} is an ordinal categorical variable.

A quick review about categorical variables:

- Nominal categorical variables: categorical variables without an implied order.
- Ordinal categorical variables: categorical variables having a natural ordering.

R treats both nominal categorical variable and ordinal categorical variable as factors. Try checking the data type of \textcolor{teal}{ClassYear} and verify that R returns it as a factor (i.e. a categorical variable).

```{r}
class(ClassSurveyData$ClassYear)
```

Factors have specific factor levels, and one can check the levels by 

```{r}
levels(ClassSurveyData$ClassYear)
```

### \textcolor{blue}{Exercise 1: } Verify that the variable LACOLschool is a factor. How many levels are contained in LACOLschool, and what are they?

```{r, eval = TRUE}
#insert the correct commands here (they should not be preceded by a hashtag)
class(ClassSurveyData$LACOLschool)
levels(ClassSurveyData$LACOLschool)
```

### \textcolor{blue}{Answer 1: } (Write your answer in a few words in plain English here.)

LACOLschool is a factor with levels: Amherst College, Bryn Mawr College, Davidson College, Hamilton College, Haverford College, Swarthmore College, Vassar College, Washington and Lee University, and Williams College.

### \textcolor{red}{Grade for Exercise 1: /5} 
### \textcolor{red}{Comments: } 

## \textcolor{blue}{Working with factors: summarizing a factor}

We know there are 83 students responded to the Class Survey, and we would like to find out how many of them are Freshman/Fist-Year, Sophomore, Junior, Senior and Other. You can use the \textcolor{teal}{summary} command to find out about the breakdown of the \textcolor{teal}{ClassYear}.

```{r}
summary(ClassSurveyData$ClassYear)
```

The \textcolor{teal}{summary} command is very useful, and you can summarize other types of variables using summary as well. For factors, the command \textcolor{teal}{table} is another useful tool. It should give you the same summary as the \textcolor{teal}{summary} command for a factor.

```{r}
table(ClassSurveyData$ClassYear)
```

Another useful summary of factors is plotting a barplot. You can use the \textcolor{teal}{barplot} command on top of the \textcolor{teal}{table} command of the factor, as below.

```{r, fig.width = 7, fig.height = 6}
barplot(table(ClassSurveyData$ClassYear))
```

Whenever you make a plot in RMarkdown, you might want to adjust the plot size. See the example above where it sets fig.width = 7 and fig.height = 6. 

Once a barplot is created, you might realize that the labels are not listed as Freshman/First-Year, Sophomore, Junior, and Senior. They are instead listed alphabetically, which is the default. What if we want to make sure that the labels are listed in a particular order that we would like? Try the following command to specify the preferred order through the \textcolor{teal}{levels} argument.

```{r, fig.width = 7, fig.height = 6}
ClassSurveyData$ClassYear <- factor(ClassSurveyData$ClassYear, 
                                       levels = c("Freshman/First-Year", "Sophomore",
                                                  "Junior", "Senior"))
table(ClassSurveyData$ClassYear)
barplot(table(ClassSurveyData$ClassYear))
```

### \textcolor{blue}{Exercise 2: } Summarize the variable SpringSemester. Note that this is an ordinal categorical variable (very poor, poor, neutral, good, very good). Make necessary changes to the order of the variable levels accordingly. Your summary should include counts of observations in each level and a barplot.

```{r, eval = TRUE}
#insert the correct commands here (they should not be preceded by a hashtag)
ClassSurveyData$SpringSemester <- factor(ClassSurveyData$SpringSemester,
                levels = c("very poor", "poor", "neutral", "good", "very good"))
table(ClassSurveyData$SpringSemester)
barplot(table(ClassSurveyData$SpringSemester))
```

### \textcolor{blue}{Answer 2: } (Write your answer in a few words in plain English here.)

While about the same number of respondents had a poor (11) or very good (13) spring semester, the majority of respondents had a neutral (25) or good (34) spring semester. No student had a very poor spring semester.

### \textcolor{red}{Grade for Exercise 2: /8} 
### \textcolor{red}{Comments: } 


## \textcolor{blue}{Working with factors: select elements and make comparison}

We can easily select elements from a factor if we know the indices of the elements. For example, to know how the spring semester was for the first respondent.

```{r}
ClassSurveyData$SpringSemester[1]
```

Note that for factors, R will not only return the element itself, but also the levels of the factor. The returned levels inform us whether we should reorder the levels to reflect the ordering of an ordinal categorical variable. Moreover in our Class Survey data, since no one answered very poor, the levels output above did not include the level of very poor. This taught us another lesson about factors: the levels we got from the output might not be all the levels that are possible.

### \textcolor{blue}{Exercise 3: } Did the 1st respondent enjoy the spring semester more than the 2nd respondent? Hint: you can use logical operator > to make comparison. Note that comparison only makes sense for ordinal categorical variables, therefore reorder the levels if necessary.

```{r}
#insert the correct commands here (they should not be preceded by a hashtag)
ClassSurveyData$SpringSemester <- factor(ClassSurveyData$SpringSemester, ordered = TRUE)
ClassSurveyData$SpringSemester[1]
ClassSurveyData$SpringSemester[2]
ClassSurveyData$SpringSemester[1] > ClassSurveyData$SpringSemester[2]
```

### \textcolor{blue}{Answer 3: } (Write your answer in a few words in plain English here.)

As can be seen above, the first respondent did enjoy their spring semester more than the second respondent.

### \textcolor{red}{Grade for Exercise 3: /5} 
### \textcolor{red}{Comments: } 

## \textcolor{blue}{The summary command: summarizing a numerical variable}

As mentioned previously, the \textcolor{teal}{summary} command is very useful. We have used it to summarize a factor variable, specifically, finding the counts of observations in each level of a factor. We now introduce how to use the \textcolor{teal}{summary} command to summarize a numerical variable.

Suppose we want to find out several summary statistics of the variable  \textcolor{teal}{CountriesVisited}.

```{r}
summary(ClassSurveyData$CountriesVisited)
```

### \textcolor{blue}{Exercise 4: } Summarize the number of countries visited by students from Davidson College. What is the maximum number of countries visited? What is the median number of countries visited? Hint: refer to Unit2_Lab1_yourname.Rmd to review how to select observations from Davidson College.

```{r}
#insert the correct commands here (they should not be preceded by a hashtag)
Davidson_vector <- ClassSurveyData$LACOLschool == "Davidson College"
Travel_vector <- ClassSurveyData$CountriesVisited
DavidsonTravel <- Travel_vector[Davidson_vector]
summary(DavidsonTravel)
```

### \textcolor{blue}{Answer 4: } (Write your answer in a few words in plain English here.)

The maximum number of countries visited by a Davidson College student is 10. The median number of countries visited by Davidson College students is 4. 

### \textcolor{red}{Grade for Exercise 4: /7} 
### \textcolor{red}{Comments: } 
